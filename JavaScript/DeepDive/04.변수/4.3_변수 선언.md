# 변수

앞서 식별자에 대해서 배웠습니다. 배운 내용을 회고하자면, 식별자란 **식별자는 변수나 함수의 이름을 작성할 때 사용하는 이름**을 의미하며, **식별자는 값이 아니라 메모리 주소를 기억**하고 있습니다.

## 4.3 변수 선언

변수 선언이란 변수를 생성하는 것을 말합니다. 좀 더 자세히 말하자면, **값을 저장하기 위해 메모리 공간을 확보**하고 변수 이름과 확보된 메모리 공간의 주소를 `연결`해서 값을 저장할 수 있게 준비하는 것을 의미합니다. 변수 선언에 의한 확보된 메모리 공간은 확보가 `해제`되기 전까지 누구도 확보된 메모리 공간을 사용할 수 없도록 보호가 됩니다.

**변수를 사용하려면 반드시 선언이 필요합니다.** 변수를 선언할 때는 `var`, `let`, `const` 키워드를 사용합니다. `ES6`에서 `let`과 `const`키워드가 도입되기 이전까지 `var`키워드는 자바스크립트에서 변수를 선언할 수 있는 유일한 키워드였습니다.

### 참고) ES5 VS. ES6

- `var`키워드는 여러 단점이 있습니다. 대표적인 것이 `블록 레벨 스코프`를 지원하지 않고 `함수 레벨 스코프`를 지원한다는 것입니다. 이로인해서 의도치 않게 전역 변수가 선언 되어 심각한 부작용이 발생합니다.
- `ES6`에서는 이러한 단점을 보완하기 위해 `let`과 `const`를 도입하게 되었습니다.
- `ES6`는 기본적으로 하위 호환성을 유지하면서 `ES5`의 기반 위에 새로운 기능을 추가한 `ES5의 상위 집합`입니다.

### var

```js
var score; // 변수 선언(변수 선언'문')
```

| 변수이름 (식별자) | 메모리 주소 |  메모리   |
| :---------------: | :---------: | :-------: |
|                   | 0x00000000  |    ...    |
|                   |     ...     |           |
|       score       | 0x000000F2  | undefined |
|                   |     ...     |           |
|                   | 0xFFFFFFFFF |           |

- 위 변수 선언문은 다음과 같이 변수 이름을 등록하고 값을 저장할 메모리 공간을 확보합니다. 변수를 선언한 이후, 아직 변수에 값을 할당하지 않았습니다. 따라서 변수 선언에 의해 확보된 메모리 공간은 비어 있을 것으로 생각할 수 있으나, 확보된 메모리 공간에는 자바슼릡트 엔진에 의해 `undefined`라는 값이 암묵적으로 할당되어 `초기화`됩니다.

> _**Key Point💡**_ > `undefined`는 자바스크립트에서 제공하는 **원시 타입의 값(primitive value)**입니다.

자바스크립트 엔진은 변수 선언을 다음과 같이 2단계에 거쳐 수행합니다.

- **선언 단계 :** 변수 이름을 등록해서 자바스크립트 엔진에 변수의 존재를 알립니다.
- **초기화 단게 :** 값을 저장하기 위한 메모리 공간을 확보하고 암묵적으로 `undefined`를 할당해 초기화 합니다.

### 참고) 변수의 이름은 어디에 등록되는가?

- 변수의 이름을 비롯한 모든 식별자는 **실행 컨텍스트**에 등록됩니다. **실행 컨텍스트(execution context)**는 자바스크립트 엔진이 소스 코드를 평가하고 실행하기 위해 필요한 환경을 제공하고 코드의 실행 결과를 실제로 관리하는 영역입니다. 자바스크립트 엔진은 실행 컨텍스트를 통해 식별자와 스코프를 관리합니다.
- 변수 이름과 변수 값은 실행 컨텍스트 내에 키(key)/값(value)로 등록되어 관리됩니다.

var 키워드를 사용한 변수 선언은 선언 단계와 초기화 단계가 동시 진행됩니다. `var score;`는 선언 단계를 통해 변수 이름 `score`를 등록하고, 초기화 단계를 통해 `score`변수에 암묵적으로 `undefined`를 할당해 초기화 합니다.

> _**Key Point💡**_
> var 키워드로 선언한 변수는 `undefined`로 암묵적인 초기화가 자동으로 수행됩니다. 따라서, 어떠한 값도 할당하지 않아도 `undefined`값을 가지고 있습니다.

#### \*초기화린?

- 변수가 선언된 이후 최초로 값을 할당하는 것을 말합니다.

만약 **초기화**단게를 거치지 않으면 확보된 메모리 공간에는 이전에 다른 애플리케이션이 사용했던 값이 남아 있을 수 있습니다. 이러한 값을 쓰레기 값(garbage value)라고 합니다. 자바스크립트의 var키워드는 암묵적으로 초기화를 수행하므로 이러한 위험으로부터 안전하게 됩니다.

변수를 사용하려면 반드시 선언이 필요합니다. 변수뿐만 아니라, 모든 식별자(함수, 클래스 등)가 그렇습니다. 만약 선언하지 않은 식별자에 접근하면 `ReferenceError(참조에러)`가 발생합니다.

> _**Key Point💡**_ > **ReferenceError**는 식별자를 통해 값을 참조하려 했지만 자바스크립트 엔진이 등록된 식별자를 찾을 수 없을 때 발생하는 에러 입니다.

## 요약

- 변수는 값을 저장하기 위해 메모리 공간을 확보하는 것을 말한다.
- 변수는 변수 이름과 확보된 메모리 공간 주소를 연결해서 값을 저장할 수 있게 준비하는 것입니다.
- 변수의 선언을 위한 키워드로 대표적으로는 var, let, const가 있습니다.
- var의 경우 블록레벨 스코프가 아닌, 함수 레벨 스코프만을 지원합니다.
- `var` 키워드를 사용한 변수 선언ㅇ느 `선언 단계`와 `초기화 단계`가 동시에 진행됩니다.
- 변수 이름을 비롯한 모든 식별자는 **실행 컨텍스트**에 등록이 됩니다.
- 변수를 사용하려면 반드시 선언이 필요합니다. 만약 선언하지 않은 식별자에 접근하면 `ReferenceError(참조에러)`가 발생합니다.
